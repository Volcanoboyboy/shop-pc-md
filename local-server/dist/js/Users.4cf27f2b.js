(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users"],{"2db3":function(e,t,a){"use strict";var s=a("cee4"),i=a.n(s);i.a},8418:function(e,t,a){"use strict";var s=a("c04e"),i=a("9bf2"),r=a("5c6c");e.exports=function(e,t,a){var o=s(t);o in e?i.f(e,o,r(0,a)):e[o]=a}},"99af":function(e,t,a){"use strict";var s=a("23e7"),i=a("d039"),r=a("e8b5"),o=a("861d"),l=a("7b0b"),n=a("50c4"),d=a("8418"),u=a("65f0"),m=a("1dde"),c=a("b622"),g=a("2d00"),p=c("isConcatSpreadable"),f=9007199254740991,b="Maximum allowed index exceeded",U=g>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=m("concat"),D=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},h=!U||!v;s({target:"Array",proto:!0,forced:h},{concat:function(e){var t,a,s,i,r,o=l(this),m=u(o,0),c=0;for(t=-1,s=arguments.length;t<s;t++)if(r=-1===t?o:arguments[t],D(r)){if(i=n(r.length),c+i>f)throw TypeError(b);for(a=0;a<i;a++,c++)a in r&&d(m,c,r[a])}else{if(c>=f)throw TypeError(b);d(m,c++,r)}return m.length=c,m}})},cee4:function(e,t,a){},ed81:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.isLoadingOfFullscreen,expression:"isLoadingOfFullscreen",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"users"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",[e._v("用户列表")])],1),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},on:{change:e.search},scopedSlots:e._u([{key:"append",fn:function(){return[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.search}})]},proxy:!0}]),model:{value:e.queryKeywords,callback:function(t){e.queryKeywords="string"===typeof t?t.trim():t},expression:"queryKeywords"}})],1),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUserDialog.visible=!0}}},[e._v("添加用户")])],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.users}},[a("el-table-column",{attrs:{label:"#",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"username",label:"姓名"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),a("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),a("el-table-column",{attrs:{prop:"mg_state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-switch",{on:{change:function(t){return e.changeStatus(s)}},model:{value:s.mg_state,callback:function(t){e.$set(s,"mg_state",t)},expression:"user.mg_state"}})]}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(t){return e.openEditUserDialog(s)}}}),a("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(t){return e.delUser(s)}}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分配权限",placement:"top",enterable:!1}},[a("el-button",{attrs:{icon:"el-icon-setting",size:"mini",type:"warning"}})],1)]}}])})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{"page-sizes":[1,2,5,10,15],"page-size":e.page.size,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.onPageSizeChange,"current-change":e.onPageNumberChange}})],1)],1)],1),a("el-dialog",{attrs:{title:e.addUserDialog.title,visible:e.addUserDialog.visible},on:{"update:visible":function(t){return e.$set(e.addUserDialog,"visible",t)}},scopedSlots:e._u([{key:"default",fn:function(){return[a("el-form",{ref:"addUserDialogForm",attrs:{model:e.addUserDialog.form.data,rules:e.addUserDialog.form.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.addUserDialog.form.data.username,callback:function(t){e.$set(e.addUserDialog.form.data,"username",t)},expression:"addUserDialog.form.data.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.addUserDialog.form.data.password,callback:function(t){e.$set(e.addUserDialog.form.data,"password",t)},expression:"addUserDialog.form.data.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.addUserDialog.form.data.email,callback:function(t){e.$set(e.addUserDialog.form.data,"email",t)},expression:"addUserDialog.form.data.email"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{attrs:{maxlength:"11"},model:{value:e.addUserDialog.form.data.mobile,callback:function(t){e.$set(e.addUserDialog.form.data,"mobile",t)},expression:"addUserDialog.form.data.mobile"}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[a("el-button",{on:{click:e.addUserDialog.onCancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.addUserDialog.isLoading},on:{click:e.addUserDialog.onOk}},[e._v("确 定")])]},proxy:!0}])}),a("el-dialog",{attrs:{title:e.editUserDialog.title,visible:e.editUserDialog.visible},on:{"update:visible":function(t){return e.$set(e.editUserDialog,"visible",t)}},scopedSlots:e._u([{key:"default",fn:function(){return[a("el-form",{ref:"editUserDialogForm",attrs:{model:e.editUserDialog.form.data,rules:e.editUserDialog.form.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editUserDialog.form.data.username,callback:function(t){e.$set(e.editUserDialog.form.data,"username",t)},expression:"editUserDialog.form.data.username"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.editUserDialog.form.data.email,callback:function(t){e.$set(e.editUserDialog.form.data,"email",t)},expression:"editUserDialog.form.data.email"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{attrs:{maxlength:"11"},model:{value:e.editUserDialog.form.data.mobile,callback:function(t){e.$set(e.editUserDialog.form.data,"mobile",t)},expression:"editUserDialog.form.data.mobile"}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[a("el-button",{on:{click:e.editUserDialog.onCancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.editUserDialog.isLoading},on:{click:e.editUserDialog.onOk}},[e._v("确 定")])]},proxy:!0}])}),a("hr"),e._v(" 演示支持.sync修饰符的组件: "),a("div",[e._v(" ptitle: "),a("span",[e._v(e._s(e.ptitle))])]),a("text-document",{attrs:{title:e.ptitle},on:{"update:title":function(t){e.ptitle=t}}})],1)},i=[],r=(a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-document"},[a("div",[e._v("text-document组件："),a("input",{attrs:{type:"text"},domProps:{value:e.title},on:{input:e.onInput}})])])}),o=[],l={name:"TextDocument",props:{title:{type:String}},methods:{onInput:function(e){this.$emit("update:title",e.target.value)}}},n=l,d=a("2877"),u=Object(d["a"])(n,r,o,!1,null,null,null),m=u.exports,c=null,g={name:"Users",components:{TextDocument:m},data:function(){var e=this;return{ptitle:"父组件的ptitle",isLoadingOfFullscreen:!1,addUserDialog:{title:"添加用户",visible:!1,isLoading:!1,form:{data:{username:"",password:"",email:"",mobile:""},rules:{username:[{required:!0,message:"请输入用户名"},{min:5,max:16,message:"长度在5~16个字符"}],password:[{required:!0,message:"请输入密码"},{min:5,max:16,message:"长度在5~16个字符"}],email:[{required:!0,message:"请输入邮箱"},{pattern:/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/,message:"请输入正确的邮箱"}],mobile:[{required:!0,message:"请输入手机"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机"}]}},onOk:function(){e.addUserDialog.isLoading=!0,e.$refs.addUserDialogForm.validate().then((function(){return e.$request.post("users",e.addUserDialog.form.data)})).then((function(t){201===t.data.meta.status?(e.$message.success("添加成功"),e.loadUsers(),e.addUserDialog.visible=!1,e.$refs.addUserDialogForm.resetFields()):e.$message.error(t.data.meta.msg),e.addUserDialog.isLoading=!1})).catch((function(){e.addUserDialog.isLoading=!1}))},onCancel:function(){e.addUserDialog.visible=!1}},editUserDialog:{title:"编辑用户",visible:!1,isLoading:!1,form:{data:{id:"",username:"",email:"",mobile:""},rules:{email:[{required:!0,message:"请输入邮箱"},{pattern:/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/,message:"请输入正确的邮箱"}],mobile:[{required:!0,message:"请输入手机"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机"}]}},onOk:function(){e.editUserDialog.isLoading=!0,e.$refs.editUserDialogForm.validate().then((function(){return e.$request.put("users/".concat(e.editUserDialog.form.data.id),{email:e.editUserDialog.form.data.email,mobile:e.editUserDialog.form.data.mobile})})).then((function(t){200===t.data.meta.status?(e.$message.success("修改成功"),e.loadUsers(),e.editUserDialog.visible=!1):e.$message.error(t.data.meta.msg),e.editUserDialog.isLoading=!1})).catch((function(){e.editUserDialog.isLoading=!1}))},onCancel:function(){e.editUserDialog.visible=!1}},users:[],isLoading:!1,page:{number:1,size:5,total:0},queryKeywords:""}},methods:{delUser:function(e){var t=this;this.$confirm('你确定要删除 "'.concat(e.username,'" 吗？'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.$request.delete("users/".concat(e.id))})).then((function(e){200===e.data.meta.status?(t.$message.success("删除成功!"),t.loadUsers()):t.$message.error(e.data.meta.msg)}))},openEditUserDialog:function(e){this.editUserDialog.visible=!0,this.editUserDialog.form.data.id=e.id,this.editUserDialog.form.data.username=e.username,this.editUserDialog.form.data.email=e.email,this.editUserDialog.form.data.mobile=e.mobile},onPageNumberChange:function(e){this.page.number=e,this.loadUsers()},search:function(){this.page.number=1,this.loadUsers()},loadUsers:function(){var e=this;this.isLoading=!0,null!==c&&clearTimeout(c),c=setTimeout((function(){e.$request.get("users",{params:{query:e.queryKeywords,pagenum:e.page.number,pagesize:e.page.size}}).then((function(t){200===t.data.meta.status?(e.users=t.data.data.users,e.page.total=t.data.data.total):e.$message.error(t.data.meta.msg),e.isLoading=!1}))}),500)},onPageSizeChange:function(e){this.page.size=e,this.loadUsers()},changeStatus:function(e){var t=this;this.isLoadingOfFullscreen=!0,this.$request.put("users/".concat(e.id,"/state/").concat(e.mg_state)).then((function(e){200===e.data.meta.status?t.$message.success(e.data.meta.msg):t.$message.error(e.data.meta.msg),t.isLoadingOfFullscreen=!1}))}},mounted:function(){this.loadUsers()}},p=g,f=(a("2db3"),Object(d["a"])(p,s,i,!1,null,"661d6f9c",null));t["default"]=f.exports}}]);
//# sourceMappingURL=Users.4cf27f2b.js.map